<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="WEB-INF/layout.xhtml">

	<ui:define name="header">

	</ui:define>

	<ui:define name="content">

		<div class="container-fluid">

			<div class="row justify-content-center" style="margin-top: 25px">
			
				<div class="col-2 text-center">
					<h:form>
						<h:commandButton value="#{lang['btn.addnewbook']}" action="#{bookController.newBook}" />
					</h:form>
				</div>
				
				<div class="col-2 text-center">
					<h:form>
						<h:commandButton value="#{lang['btn.addnewauthor']}" action="#{authorController.newAuthor}" />
					</h:form>
				</div>
				
			</div>

			<div class="row justify-content-center" style="margin-top: 25px">
				<div class="col-6 text-center">

					<h:form>
						<div class="row justify-content-center" style="margin-top: 25px">
							<div class="col-6 text-center">
								<span style="font-size: 26px"><strong>#{lang['label.booksdatatable']}</strong></span>
							</div>
						</div>
						<h:dataTable id="datatableBooks" value="#{bookController.list}"
							var="book" class="table table-dark table-striped">

							<h:column>

								<f:facet name="header">#{lang['label.booksdatatable.title']}</f:facet>

								<h:inputText value="#{book.title}" rendered="#{book.editMode}"></h:inputText>
								<h:outputText value="#{book.title}" rendered="#{!book.editMode}"></h:outputText>

							</h:column>

							<h:column>

								<f:facet name="header">#{lang['label.booksdatatable.edit']}</f:facet>

								<h:inputHidden id="bookId" value="#{book.id}"
									rendered="#{book.editMode}" />

								<h:commandButton value="#{lang['label.booksdatatable.edit']}" execute="#{book.id}"
									rendered="#{!book.editMode}">
									<f:ajax listener="#{bookController.editBook(book)}"
										render="@form"></f:ajax>
								</h:commandButton>

								<h:commandButton value="Save" rendered="#{book.editMode}" actionListener="#{bookController.saveBook(book)}">
								</h:commandButton>

							</h:column>

							<h:column>

								<f:facet name="header">#{lang['label.booksdatatable.delete']}</f:facet>
								<p:commandButton value="#{lang['label.booksdatatable.delete']}"
									actionListener="#{bookController.deleteBook(book)}"></p:commandButton>

							</h:column>

						</h:dataTable>
					</h:form>

					<div class="row justify-content-center" style="margin-top: 25px">
						<div class="col-6 text-center">
							<span style="font-size: 26px"><strong>#{lang['label.authorsdatatable']}</strong></span>
						</div>
					</div>

					<h:dataTable id="datatableAuthors"
						value="#{authorController.listAuthors}" var="author"
						class="table table-dark table-striped">

						<h:column>

							<f:facet name="header">#{lang['label.authorsdatatable.firstname']}</f:facet>
							<h:outputText value="#{author.firstName}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">#{lang['label.authorsdatatable.lastname']}</f:facet>
							<h:outputText value="#{author.lastName}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">#{lang['label.authorsdatatable.country']}</f:facet>
							<h:outputText value="#{author.country}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">#{lang['label.authorsdatatable.yearofbirth']}</f:facet>
							<h:outputText value="#{author.yearOfBirth}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">#{lang['label.authorsdatatable.delete']}</f:facet>
							<p:commandButton value="#{lang['label.authorsdatatable.delete']}"
								actionListener="#{authorController.deleteAuthor(author)}"></p:commandButton>

						</h:column>

					</h:dataTable>

				</div>
			</div>

		</div>

	</ui:define>

	<ui:define name="footer">
	</ui:define>
</ui:composition>
</html>