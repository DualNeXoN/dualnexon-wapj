<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="WEB-INF/layout.xhtml">

	<ui:define name="header">

	</ui:define>

	<ui:define name="content">

		<div class="container-fluid">

			<div class="row justify-content-center" style="margin-top: 25px">
			
				<div class="col-1 text-center">
					<h:form>
						<h:commandButton value="Add new Book" action="#{bookController.newBook}" />
					</h:form>
				</div>
				
				<div class="col-1 text-center">
					<h:form>
						<h:commandButton value="Add new Author" action="#{authorController.newAuthor}" />
					</h:form>
				</div>
				
			</div>

			<div class="row justify-content-center" style="margin-top: 25px">
				<div class="col-6 text-center">

					<h:form>
						<div class="row justify-content-center" style="margin-top: 25px">
							<div class="col-6 text-center">
								<span style="font-size: 26px"><strong>Books
										datatable</strong></span>
							</div>
						</div>
						<h:dataTable id="datatableBooks" value="#{bookController.list}"
							var="book" class="table table-dark table-striped">

							<h:column>

								<f:facet name="header">Book title</f:facet>

								<h:inputText value="#{book.title}" rendered="#{book.editMode}"></h:inputText>
								<h:outputText value="#{book.title}" rendered="#{!book.editMode}"></h:outputText>

							</h:column>

							<h:column>

								<f:facet name="header">Edit</f:facet>

								<h:inputHidden id="bookId" value="#{book.id}"
									rendered="#{book.editMode}" />

								<h:commandButton value="Edit" execute="#{book.id}"
									rendered="#{!book.editMode}">
									<f:ajax listener="#{bookController.editBook(book)}"
										render="@form"></f:ajax>
								</h:commandButton>

								<h:commandButton value="Save" rendered="#{book.editMode}" actionListener="#{bookController.saveBook(book)}">
								</h:commandButton>

							</h:column>

							<h:column>

								<f:facet name="header">Delete</f:facet>
								<p:commandButton value="Delete"
									actionListener="#{bookController.deleteBook(book)}"></p:commandButton>

							</h:column>

						</h:dataTable>
					</h:form>

					<div class="row justify-content-center" style="margin-top: 25px">
						<div class="col-6 text-center">
							<span style="font-size: 26px"><strong>Authors
									datatable</strong></span>
						</div>
					</div>

					<h:dataTable id="datatableAuthors"
						value="#{authorController.listAuthors}" var="author"
						class="table table-dark table-striped">

						<h:column>

							<f:facet name="header">First name</f:facet>
							<h:outputText value="#{author.firstName}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">Last name</f:facet>
							<h:outputText value="#{author.lastName}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">Country</f:facet>
							<h:outputText value="#{author.country}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">Year of birth</f:facet>
							<h:outputText value="#{author.yearOfBirth}"></h:outputText>

						</h:column>

						<h:column>

							<f:facet name="header">Delete</f:facet>
							<p:commandButton value="Delete"
								actionListener="#{authorController.deleteAuthor(author)}"></p:commandButton>

						</h:column>

					</h:dataTable>

				</div>
			</div>

		</div>

	</ui:define>

	<ui:define name="footer">
	</ui:define>
</ui:composition>
</html>